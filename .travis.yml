language: node_js
node_js:
- 10
addons:
  apt:
    packages:
    - libgconf-2-4
cache:
  npm: true
  directories:
  - node_modules
install:
- npm ci
script:
- npm run test:unit
after_success:
- cat ./coverage/lcov.info | coveralls
- npm run build
before_deploy: "./before_deploy.sh"
deploy:
  provider: heroku
  api_key:
    secure: $HEROKU_KEY
  app:
    dev: semicolon-ds-staging
  skip_cleanup: true
after_deploy: "./after_deploy.sh"
